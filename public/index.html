<!DOCTYPE html>
<html>
<head>
	<title>WhackyMole</title>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

	<style type="text/css">
		body{
			font-family: "Comic Sans MS";
		}
		#gameBoard{
			text-align: center;
			margin-left: auto;
			margin-right: auto;
			width: 1000px;
			height: 1000px;
			border: 1px solid black;
			background-image: url('images/moleBG.jpg');
			background-size: 100%;
			z-index: -999;
			cursor: url('images/mallet.png') 15 45,auto;
		}
		.moleHole{
			width: 300px;
			height: 300px;
			display: inline-block;
		}
		.hidden{
			opacity: 0;
		}
		.start{
			font-family: "Comic Sans MS";
			font-size: 40px;
			width: 500px;
		}
		.moleRow{
			height: 300px;
		}
		.stayStill{
			margin-top: -2250px;
			background-color: #562712;
		}
		.center{
			text-align: center;
		}
		.stretch{
			width: 100%;
			height: 100%;
		}
		.follow{
			position: absolute;

		}
	</style>
</head>
<body>
	<div class="center">
		<h1>Whacky Mole</h1>
		<button id="start" class="start">Start</button><br>
        <input type="text" id="round" class="whatRound" readonly="">
        <input type="text" id="userTimeLimit" class="timeLimit" readonly="">
		<div id="gameBoard">
			<img class="stretch" src="images/moleBG.jpg">
			<div class="moleRow" id="row1">
				<div class="moleHole"><img class="hidden stayStill" id="0" src="images/1.jpg"></div>
				<div class="moleHole"><img class="hidden stayStill" id="1" src="images/2.jpg"></div>
				<div class="moleHole"><img class="hidden stayStill" id="2" src="images/3.jpg"></div>
			</div>
			<div class="moleRow" id="row2">
				<div class="moleHole"><img class="hidden stayStill" id="3" src="images/4.jpg"></div>
				<div class="moleHole"><img class="hidden stayStill" id="4" src="images/5.jpg"></div>
				<div class="moleHole"><img class="hidden stayStill" id="5" src="images/6.jpg"></div>
			</div>
			<div class="moleRow" id="row3">	
				<div class="moleHole"><img  class="hidden stayStill" id="6" src="images/7.jpg"></div>
				<div class="moleHole"><img  class="hidden stayStill" id="7" src="images/8.jpg"></div>
				<div class="moleHole"><img  class="hidden stayStill" id="8" src="images/9.jpg"></div>
			</div >
		</div>
	</div>

	<script type="text/javascript">
	"use strict";
		$('#start').on('click', start);
		$('#start').on('click', reset);
		$('#gameBoard').mousedown(function(){
			$( this ).css({
		    	"cursor": "url('images/mallet2.png')15 45,auto"
		    });
		});
		$('#gameBoard').mouseup(function(){
			$( this ).css({
		    	"cursor": "url('images/mallet.png')15 45,auto"
		    });
		});

		var intS;
		var moleCounter = 1;
		var timer1 = 990;
		var timer2 = 1001;
		var userTime;
		var intT;
		var intS;
		function timeLimit(){
			intT = setInterval(function(){
				$('#userTimeLimit').val('Time left: ' + userTime)
				userTime = userTime - 1;
				check();
			},1000);
		}	
		function start(){
			reset();
			gamePlay();
			timeLimit();
		}
		function gamePlay(){
			check();
			$('#round').val("Round: " + moleCounter);
			if (moleCounter % 2	 === 0){
				speedUp();
			}
			disable();
			enable();
			clearInterval(intS);
			intS = setInterval(function(){
				popUp();
			},timer2);
		}
		function popUp(){	
			var random = Math.floor(Math.random() * 9);
        	$('#'+random).removeClass('hidden');
        	setTimeout(function(){
	        	$('#'+random).addClass('hidden');
        	},timer1);
	    }
		function enable(){
			$('.stayStill').on('click', function(){
				check();
				$(this).addClass('hidden');
				moleCounter++;
				$('#round').val("Round: " + moleCounter);
				gamePlay();
			});
		}
		function disable(){
			$('.stayStill').off('click');
		}
		function speedUp(){
			timer1 = timer1 - 50;
			timer2 = timer2 - 50;
			console.log('changing speed');
		}
		function reset(){
			timer1 = 990;
			timer2 = 1001;
			moleCounter = 1;
			userTime = 60;
		}
		function check(){
			if (userTime <= -1){
				clearInterval(intS);
				clearInterval(intT);
				disable();
				alert('Game over! Try again!');

			}
		}

		


	</script>


</body>
</html>





